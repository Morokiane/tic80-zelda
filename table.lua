-- title:  Table Demo
-- author: Morokiane
-- desc:   A small demo on moving/removing objects in tables
-- script: lua

--[[This demo uses table.move. It doesn't really move 
			objects but	copies them to another table. To actually 
			do a move the "moved" object needs to be removed from
			the table after being copied.]]

w,h=240,136
hw,hh=w/2,h/2
t=0
win={}
msgbox=true
txt="Up/Down\nAdd objects to table\n\nLeft/Right\nMove objects between tables\n\nZ remove from top of Obj table\n\nX remove from bottom of Obj table\n\nA to close this window."

--Easier controls to remember
c={
	up=0,
	down=1,
	left=2,
	right=3,
	z=4,
	x=5,
	a=6,
	s=7
}
--Setup the two tables
obj={}
moved={}

function OVR()
	if msgbox==true then
		AddWin(hw,hh,150,75,3,txt)
	end
end

function TIC()
	cls()
	if msgbox==false then
		print("Obj Table: "..#obj,0,0,12)
		print("Moved Table: "..#moved,110,0,12)
		--[[Print the objects that are in the
						tables down the screen]]
		for counter=1,#obj do
			print(obj[counter],0,(counter*8),12)
		end
		for counter=1,#moved do
			print(moved[counter],110,(counter*8),2)
		end
		
		if btnp(c.up) then
			table.insert(obj,"orange")
		end
		if btnp(c.down) then
			table.insert(obj,"apple")
		end
	
		if btnp(c.right) then
			--[[A local variable needs to be setup to add one
			to the index. LUA starts tables at 1 and not 0
			so 1 needs to be added or the object will have nowhere 
			to move since index 0 doesn't exist]]
			local i=#moved+1
			--[[Move object 1 through 1 in obj to index 1 to moved.
			If more than one object needs to be moved at once, say
			3 objects, change the second 1 in table.move to 3. 
			table.remove will need to be updated to remove the
			3 objects from the other table.]]		
			table.move(obj,1,1,i,moved)
			table.remove(obj,1)
		end
		
		if btnp(c.left) then
			local i=#obj+1
			table.move(moved,1,1,i,obj)
			table.remove(moved,1)
		end
		--Remove first object in table
		if btnp(c.z) then
			table.remove(obj,1)
		end
		--Remove last object in table
		if btnp(c.x) then
			table.remove(obj,#obj)
		end
	end
	if btnp(c.a) then
		msgbox=false
	end
end

function AddWin(x,y,w,h,col,txt)
	for i=1,#win do
		table.insert(win,i,#win)
			--[[.insert(table,position,value)
			win is the array/position is. i which iterates through
			the number of objects in the array / #win is where to
			put the values]]
	end
	rect(x-w/2,y-h/2,w,h,col)
	rectb(x-w/2+1,y-h/2+1,w-2,h-2,12)
 print(txt,x-w/2+3,y-h/2+3,12,0,1,true)
end

function DrawWin()
	for w in pairs(win) do
		rect(w.x,w.y,w.w,w.h,2)
	end
end
-- <TILES>
-- 000:bbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbbb
-- 001:2222222222222222222222222222222222222222222222222222222222222222
-- 002:3333333333333333333333333333333333333333333333333333333333333333
-- 003:4444444444444444444444444444444444444444444444444444444444444444
-- 004:5555555555555555555555555555555555555555555555555555555555555555
-- 005:6666666666666666666666666666666666666666666666666666666666666666
-- </TILES>

-- <WAVES>
-- 000:00000000ffffffff00000000ffffffff
-- 001:0123456789abcdeffedcba9876543210
-- 002:0123456789abcdef0123456789abcdef
-- </WAVES>

-- <SFX>
-- 000:000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000304000000000
-- </SFX>

-- <SCREEN>
-- 000:0ccc00cc0000000cc00000cccc0000000cc0000cc000000000cc00000cccc0000000000000000000000000000000000000000000000000cc0cc0000000000000000000000cc00000cccc0000000cc0000cc000000000cc00000cccc000000000000000000000000000000000000000000000000000000000
-- 001:cc00c0cccc0000000000000cc000cccc0cccc00cc0000ccc00cc00000000cc000000000000000000000000000000000000000000000000ccccc00ccc00cc00c00ccc000cccc000000cc000cccc0cccc00cc0000ccc00cc00000000cc00000000000000000000000000000000000000000000000000000000
-- 002:cc00c0cc00c0000cc000000cc00c00cc0cc00c0cc000cc0cc000000000ccc0000000000000000000000000000000000000000000000000ccccc0cc00c0cc00c0cc0cc0c00cc000000cc00c00cc0cc00c0cc000cc0cc000000000ccc000000000000000000000000000000000000000000000000000000000
-- 003:cc00c0cc00c0000cc000000cc00c00cc0cc00c0cc000ccc000cc00000cc000000000000000000000000000000000000000000000000000c0c0c0cc00c00ccc00ccc000c00cc000000cc00c00cc0cc00c0cc000ccc000cc00000cc00000000000000000000000000000000000000000000000000000000000
-- 004:0ccc00cccc00c00cc000000cc000cccc0cccc000ccc00ccc00cc00000ccccc000000000000000000000000000000000000000000000000c000c00ccc0000c0000ccc000cccc000000cc000cccc0cccc000ccc00ccc00cc00000ccccc00000000000000000000000000000000000000000000000000000000
-- 005:0000000000000ccc00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 008:000000000000000000cc0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 009:0cccc0cccc00cccc00cc0000ccc000000000000000000000000000000000000000000000000000000000000000000000000000000000000222002222000222202222000222000222000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 010:c00cc0cc00c0cc00c0cc000cc0cc00000000000000000000000000000000000000000000000000000000000000000000000000000000002200202200202002202200202002202202200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 011:c00cc0cc00c0cc00c0cc000ccc0000000000000000000000000000000000000000000000000000000000000000000000000000000000002200202200002002202200202222202220000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 012:0cccc0cccc00cccc000ccc00ccc000000000000000000000000000000000000000000000000000000000000000000000000000000000000222002200000222202200200002200222000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 013:000000cc0000cc0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000222000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 016:000000000000000000cc0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 017:0cccc0cccc00cccc00cc0000ccc000000000000000000000000000000000000000000000000000000000000000000000000000000000000222002222000222202222000222000222000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 018:c00cc0cc00c0cc00c0cc000cc0cc00000000000000000000000000000000000000000000000000000000000000000000000000000000002200202200202002202200202002202202200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 019:c00cc0cc00c0cc00c0cc000ccc0000000000000000000000000000000000000000000000000000000000000000000000000000000000002200202200002002202200202222202220000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 020:0cccc0cccc00cccc000ccc00ccc000000000000000000000000000000000000000000000000000000000000000000000000000000000000222002200000222202200200002200222000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- 021:000000cc0000cc0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000222000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000
-- </SCREEN>

-- <PALETTE>
-- 000:1a1c2c5d275db13e53ef7d57ffcd75a7f07038b76425717929366f3b5dc941a6f673eff7f4f4f494b0c2566c86333c57
-- </PALETTE>

